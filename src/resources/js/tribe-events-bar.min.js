var tribe_events_bar_action;!function(e,t,a,r,i,s,n,l,b){a(t).ready(function(){function o(e){if(!e.parents(".tribe-bar-disabled").length){var t=e.width();t>800?e.removeClass("tribe-bar-mini tribe-bar-collapse").addClass("tribe-bar-full"):e.removeClass("tribe-bar-full").addClass("tribe-bar-mini"),t<728?(e.removeClass("tribe-bar-mini").addClass("tribe-bar-collapse"),p(a("#tribe-bar-collapse-toggle"))):(e.removeClass("tribe-bar-collapse"),d(a("#tribe-bar-collapse-toggle")))}}function d(e){var t=e.attr("data-label-shown");e.attr("aria-expanded","true"),e.find(".tribe-bar-toggle-text").html(t),e.addClass("tribe-bar-filters-open"),a(".tribe-bar-filters").slideDown("fast").attr("aria-hidden","false")}function p(e){var t=e.attr("data-label-hidden");a(".tribe-bar-filters").slideUp("fast").attr("aria-hidden","true"),e.removeClass("tribe-bar-filters-open"),e.find(".tribe-bar-toggle-text").html(t),e.attr("aria-expanded","false")}function c(){if(tribe_events_bar_action="change_view","month"===n.view&&m.length){var b=m.val(),o=s.get_day();"0"!=n.datepicker_format?(b=tribeDateFormat(m.bootstrapDatepicker("getDate"),"tribeMonthQuery"),m.val(b+o)):7===b.length&&m.val(b+o)}n.url_params={},a(i).trigger("tribe_ev_preCollectBarParams"),a(i).trigger("pre-collect-bar-params.tribe");var d=a(t.getElementById("tribe-bar-form")).add(t.getElementById("tribe_events_filters_wrapper")),p=d.find("input, select");p.each(function(){var e=a(this);e.val()&&e.val().length&&!e.hasClass("tribe-no-param")&&("month"!==n.view&&"0"!==n.datepicker_format&&e.is(m)?n.url_params[e.attr("name")]=tribeDateFormat(e.bootstrapDatepicker("getDate"),"tribeQuery"):e.is(":checkbox")?e.is(":checked")&&("undefined"==typeof n.url_params[e.attr("name")]&&(n.url_params[e.attr("name")]=[]),n.url_params[e.attr("name")].push(e.val())):"radio"===e.attr("type")?e.is(":checked")&&(n.url_params[e.attr("name")]=e.val()):"undefined"!=typeof e.attr("name")&&(n.url_params[e.attr("name")]=e.val()))});var c=a(".tribe-bar-views-option-"+r.default_mobile_view).data("redirected");(r.redirected_view||c)&&(n.url_params.tribe_redirected=!0),n.url_params=a.param(n.url_params),a(i).trigger("tribe_ev_postCollectBarParams"),a(i).trigger("post-collect-bar-params.tribe"),n.url_params.length&&(n.cur_url+=l.starting_delim()+n.url_params),e.location.href=n.cur_url}b&&(a().bootstrapDatepicker||debug.warn("TEC Debug: vendor bootstrapDatepicker was not loaded before its dependant file tribe-events-bar.js"),a().placeholder||debug.warn("TEC Debug: vendor placeholder was not loaded before its dependant file tribe-events-bar.js"));var v=a(t.getElementById("tribe-bar-form")),m=a(t.getElementById("tribe-bar-date")),u=(a(t.getElementById("tribe-events")),a(t.getElementById("tribe-events-header"))),f=0,g=a("select[name=tribe-bar-view]");if(u.length&&(f=u.data("startofweek")),o(v),v.resize(function(){o(v)}),!a(".tribe-events-week-grid").length&&"month"!==n.view){var _="yyyy-mm-dd";if("0"!==n.datepicker_format){_=r.datepicker_formats.main[n.datepicker_format];var h=s.get_url_param("tribe-bar-date");h?m.val(tribeDateFormat(h,n.datepicker_format)):"day"===n.view&&0!==m.val().length&&m.val(tribeDateFormat(m.val(),n.datepicker_format))}b&&debug.info('TEC Debug: bootstrapDatepicker was just initialized in "tribe-events-bar.js" on:',m),r.datepicker_opts={weekStart:f,format:_,autoclose:!0},m.bootstrapDatepicker(r.datepicker_opts)}m.blur(function(){""===m.val()&&a(".datepicker.dropdown-menu").is(":hidden")&&l.live_ajax()&&l.pushstate&&(n.date=r.cur_date,r.cur_url=r.base_url,a(i).trigger("tribe_ev_runAjax"),a(i).trigger("run-ajax.tribe"))}),a(".tribe-bar-settings").length&&a(t.getElementById("tribe-events-bar")).addClass("tribe-has-settings"),a("#tribe-events-bar .hasDatepicker").length&&a(t.getElementById("tribe-events-bar")).addClass("tribe-has-datepicker"),a('input[name*="tribe-bar-"]').placeholder(),a('<ul class="tribe-bar-views-list" />').insertAfter(g);var w=a(".tribe-bar-views-list");g.find("option").each(function(e){var t=a(this);displaying=t.data("view");var r="tribe-bar-views-option-"+t.data("view");a("<li></li>",{"class":"tribe-bar-views-option "+r,"data-tribe-bar-order":e,"data-view":displaying}).html(['   <a href="#">','   <span class="tribe-icon-'+displaying+'">'+t.text()+"</span>","</a>"].join("")).appendTo(".tribe-bar-views-list")});var k=g.find(":selected").data("view"),y=w.find("li[data-view="+k+"]");y.prependTo(w).addClass("tribe-bar-active"),g.hide(),v.on("click","#tribe-bar-views",function(e){e.stopPropagation(),a(this).toggleClass("tribe-bar-views-open")}),v.on("click",".tribe-bar-views-option",function(e){e.preventDefault();var t=a(this);if(!t.is(".tribe-bar-active")){var r=t.data("view");n.cur_url=a("option[data-view="+r+"]").val(),n.view_target=a('select[name=tribe-bar-view] option[value="'+n.cur_url+'"]').data("view"),tribe_events_bar_action="change_view",c()}}),s.maybe_default_view_change(),v.on("change",".tribe-bar-views-select",function(e){e.preventDefault();var t=a("option:selected",this),r=t.data("view");n.cur_url=a("option[data-view="+r+"]").val(),n.view_target=a('select[name=tribe-bar-view] option[value="'+n.cur_url+'"]').data("view"),tribe_events_bar_action="change_view",c()}),v.on("click","#tribe-bar-collapse-toggle",function(e){e.preventDefault();var t=a(this);t.hasClass("tribe-bar-filters-open")?p(t):d(t)}),a(t).on("keyup",function(e){if(9===e.which){var r=a("#tribe-bar-collapse-toggle");v.hasClass("tribe-bar-collapse")&&r.hasClass("tribe-bar-filters-open")&&!a.contains(t.getElementById("tribe-bar-filters-wrap"),e.target)&&p(r)}}),a(t).on("keyup",function(e){if(27===e.which){var t=a("#tribe-bar-collapse-toggle");v.hasClass("tribe-bar-collapse")&&t.hasClass("tribe-bar-filters-open")&&(p(t),t.focus())}}),a('label[for="tribe-bar-date"], input[name="tribe-bar-date"]').wrapAll('<div id="tribe-bar-dates" />'),a(t.getElementById("tribe-bar-filters")).before(a(t.getElementById("tribe-bar-dates"))),a(i).on("tribe_ev_serializeBar",function(){a("form#tribe-bar-form input, form#tribe-bar-form select, #tribeHideRecurrence").each(function(){var e=a(this);if(e.is("#tribe-bar-date")){var t=e.val();t.length?"month"===n.view?(n.params[e.attr("name")]=tribeDateFormat(n.mdate,"tribeMonthQuery"),n.url_params[e.attr("name")]=tribeDateFormat(n.mdate,"tribeMonthQuery")):t.match(/[0-9]{4}-[0-9]{2}/)?n.params[e.attr("name")]=n.url_params[e.attr("name")]=t:(n.params[e.attr("name")]=tribeDateFormat(e.bootstrapDatepicker("getDate"),"tribeQuery"),n.url_params[e.attr("name")]=tribeDateFormat(e.bootstrapDatepicker("getDate"),"tribeQuery")):e.is(".placeholder")&&e.is(".bd-updated")?n.url_params[e.attr("name")]=e.attr("data-oldDate"):n.date=r.cur_date}!e.val().length||e.hasClass("tribe-no-param")||e.is("#tribe-bar-date")||(e.is(":checkbox")?e.is(":checked")&&(n.params[e.attr("name")]=e.val(),"map"!==n.view&&(n.url_params[e.attr("name")]=e.val()),("month"===n.view||"day"===n.view||"week"===n.view||n.recurrence)&&n.pushcount++):(n.params[e.attr("name")]=e.val(),"map"!==n.view&&(n.url_params[e.attr("name")]=e.val()),"month"!==n.view&&"day"!==n.view&&"week"!==n.view||n.pushcount++))})});var C=a('#tribe-events-bar [class^="tribe-bar-button-"]'),D=C.next(".tribe-bar-drop-content");C.click(function(){var e=a(this);return e.toggleClass("open"),e.next(".tribe-bar-drop-content").toggle(),!1}),a(t).click(function(){a(t.getElementById("tribe-bar-views")).removeClass("tribe-bar-views-open"),C.hasClass("open")&&(C.removeClass("open"),D.hide())}),D.click(function(e){e.stopPropagation()}),b&&debug.info("TEC Debug: tribe-events-bar.js successfully loaded")})}(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,tribe_ev.tests,tribe_debug);