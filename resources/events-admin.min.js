jQuery(document).ready(function(a){function b(){return n&&a(window).width()<768?1:3}function c(a,b){var c=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),d=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return Math.floor((d-c)/t)}function d(){B.prop("checked")===!0?(C.hide(),D.hide()):(C.show(),D.show())}function e(a){"US"==a||"United States"==a?(M.show(),N.hide()):""!=a?(N.show(),M.hide()):(N.hide(),M.hide())}function f(){a("#recurrence-changed-row").show()}function g(){V.find("option").each(function(){var b=a(this);Y[b.attr("value")]=b.text()})}function h(){V.find("option").remove(),W.each(function(){var b=a(this);if(b.is(":checked")){var c=b.val();V.append('<option value="'+c+'">'+Y[c]+"</option>")}}),V.find("option").first().attr("selected","selected"),V.select2("destroy").select2({width:"250px"})}var i=a("[data-datepicker_format]"),j=a(".tribe-field-dropdown_select2 select"),k=a("#view-calendar-link-div").html(),l=a('select[name="tribeEventsTemplate"]'),m=a("#tribe-event-datepickers"),n=a("body").is(".tribe_community_edit"),o=0,p={main:["yy-mm-dd","m/d/yy","mm/dd/yy","d/m/yy","dd/mm/yy","m-d-yy","mm-dd-yy","d-m-yy","dd-mm-yy"],month:["yy-mm","m/yy","mm/yy","m/yy","mm/yy","m-yy","mm-yy","m-yy","mm-yy"]};if(a(".chosen, .tribe-field-dropdown_chosen select").chosen(),a(".select2").select2({width:"250px"}),j.select2({width:"250px"}),a(k).insertAfter(".edit-php.post-type-tribe_events #wpbody-content .wrap h2:eq(0) a"),l.length&&""===l.val()){var q=l.find("option:selected").text();l.prev(".select2-container").children().children("span").text(q)}var r=function(){var b=wp.template("tribe-select-organizer"),c=wp.template("tribe-create-organizer"),d=a("#event_organizer");d.on("click",".tribe-add-organizer",function(e){e.preventDefault();var f=a(b({})),g=a(c({}));d.find("tfoot").before(g),g.prepend(f),g.find(".chosen").chosen()}),d.on("change",".organizer-dropdown",s),d.find(".organizer-dropdown").each(function(){var b=a(this),d=b.closest("tbody"),e=b.val(),f=a(c({})).find(".organizer");"0"!=e&&f.hide(),d.append(f)}),d.on("click",".delete-organizer-group",function(b){b.preventDefault();var c=a(this).closest("tbody");c.fadeOut(500,function(){a(this).remove()})}),d.sortable({items:"> tbody",handle:".move-organizer-group",axis:"y",delay:100})},s=function(){var b=a(this),c=b.val(),d=b.closest("tbody"),e=d.find(".edit-organizer-link a"),f=e.attr("data-admin-url");"0"!=c?(d.find(".organizer").fadeOut().find("input").val(""),e.attr("href",f+c).show()):(d.find(".organizer").fadeIn(),e.hide())};if(a(".hide-if-js").hide(),"undefined"!=typeof TEC){var t=864e5,u="yy-mm-dd";i.length&&1===i.attr("data-datepicker_format").length&&(o=i.attr("data-datepicker_format"),u=p.main[o]);var v=0;m.length&&(v=m.data("startofweek"));var w=a('[name="recurrence[type]"]'),x=a("#EventEndDate"),y={dateFormat:u,showAnim:"fadeIn",changeMonth:!0,changeYear:!0,numberOfMonths:b(),firstDay:v,showButtonPanel:!0,beforeShow:function(a,c){c.input.datepicker("option","numberOfMonths",b()),c.input.data("prevDate",c.input.datepicker("getDate"))},onSelect:function(b){var d="EventStartDate"==this.id?"minDate":"maxDate",e=a(this).data("datepicker"),f=a.datepicker.parseDate(e.settings.dateFormat||a.datepicker._defaults.dateFormat,b,e.settings);if("EventStartDate"===this.id&&"None"!==w.val()){var g=a("#EventStartDate").data("prevDate"),h=c(g,x.datepicker("getDate")),i=new Date(f.setDate(f.getDate()+h));x.datepicker("option",d,i).datepicker("setDate",i)}else A.not(this).not("#recurrence_end").datepicker("option",d,f)}};a.extend(y,TEC);var z,A=a("#EventStartDate, #EventEndDate, .tribe-datepicker").datepicker(y),B=a("#allDayCheckbox"),C=a(".timeofdayoptions"),D=a("#EventTimeFormatDiv"),E=a("select[name='EventStartMonth'], select[name='EventEndMonth']"),F=a("select[name='EventStartMonth']"),G=a('select[name="EventEndMonth"]');B.click(function(){d()}),d();var H=[29,31,28,31,30,31,30,31,31,30,31,30,31],I=[a("#28StartDays"),a("#29StartDays"),a("#30StartDays"),a("#31StartDays")],J=[a("#28EndDays"),a("#29EndDays"),a("#30EndDays"),a("#31EndDays")];E.change(function(){var b=a(this),c=b.attr("name");c="EventStartMonth"==c?"Start":"End";var d=b.attr("value");"0"==d.charAt(0)&&(d=d.replace("0",""));var e=a("select[name='Event"+c+"Year']").attr("value")%4;2==d&&0==e&&(d=0);var f=a("select[name='Event"+c+"Day']");a(".event"+c+"DateField").remove(),"Start"==c?(z=I[H[d]-28],z.val(f.val()),F.after(z)):(z=J[H[d]-28],z.val(f.val()),G.after(z))}),E.change(),a("select[name='EventStartYear']").change(function(){F.change()}),a("select[name='EventEndYear']").change(function(){G.change()});var K=a(".venue"),L=a("#saved_venue");L.length>0&&"0"!=L.val()&&(K.hide(),a('[name="venue[Venue]"]').val("")),L.change(function(){var b=a(this).val(),c=a(".edit-venue-link a").attr("data-admin-url");"0"==b?(K.fadeIn(),a("#EventCountry").val(0).trigger("chosen:updated"),a("#StateProvinceSelect").val(0).trigger("chosen:updated"),e(""),a(".edit-venue-link").hide()):(K.fadeOut(),a(".edit-venue-link").show(),a(".edit-venue-link a").attr("href",c+b))}),r()}var M=a("#StateProvinceSelect_chosen"),N=a("#StateProvinceText");e(a("#EventCountry > option:selected").val());var O=a('[name="hideSubsequentRecurrencesDefault"]'),P=a('[name="userToggleSubsequentRecurrences"]');if(O.length&&P.length){var Q=a("#tribe-field-userToggleSubsequentRecurrences");O.is(":checked")&&(P.prop("checked",!1),Q.hide()),O.on("click",function(){var b=a(this);b.is(":checked")?(P.prop("checked",!1),Q.hide()):Q.show()})}var R=a('[name="recurrence[end]"]'),S=a('[name="is_recurring"]');a("#EventCountry").change(function(){var b=a(this).find("option:selected").val();e(b)}),"true"==S.val()&&(a(".recurrence-row input, .custom-recurrence-row input,.recurrence-row select, .custom-recurrence-row select").change(f),R.bind("recurrenceEndChanged",f)),R.datepicker("option","onSelect",function(){R.removeClass("placeholder"),a(this).trigger("recurrenceEndChanged")}),a("#EventInfo input, #EventInfo select").change(function(){a(".rec-error").hide()});var T=a('.wp-admin.events-cal #post #publishing-action input[type="submit"]');T.click(function(){a(this).data("clicked",!0)}),a('[name="recurrence[type]"]').change(function(){var b=a(this).find("option:selected").val();a(".custom-recurrence-row").hide(),"Custom"==b?(a("#recurrence-end").show(),a("#custom-recurrence-frequency").show(),a('[name="recurrence[custom-type]"]').change()):"None"==b?(a("#recurrence-end").hide(),a("#custom-recurrence-frequency").hide()):(a("#recurrence-end").show(),a("#custom-recurrence-frequency").hide())}),a('[name="recurrence[end-type]"]').change(function(){var b=a(this).find("option:selected").val();"On"==b?(a("#rec-count").hide(),a("#recurrence_end").show()):"Never"==b?a("#rec-count, #recurrence_end").hide():(a("#recurrence_end").hide(),a("#rec-count").show())}),a('[name="recurrence[custom-type]"]').change(function(){a(".custom-recurrence-row").hide();var b=a(this).find("option:selected"),c=b.data("tablerow");a(c).show(),a("#recurrence-interval-type").text(b.data("plural")),a('[name="recurrence[custom-type-text]"]').val(b.data("plural"))}),a("#recurrence_end_count").change(function(){a('[name="recurrence[type]"]').change()}),a('[name="recurrence[type]"]').change(function(){var b=a(this).find("option:selected"),c=a("#recurrence_end_count").val();a("#occurence-count-text").text(b.data(1==c?"single":"plural")),a('[name="recurrence[occurrence-count-text]"]').val(a("#occurence-count-text").text())}),a('[name="recurrence[custom-month-number]"]').change(function(){var b=a(this).find("option:selected"),c=a('[name="recurrence[custom-month-day]"]');isNaN(b.val())?c.show():c.hide()}),a("body").hasClass("post-type-tribe_venue")&&a("#menu-posts-tribe_events, #menu-posts-tribe_events a.wp-has-submenu").addClass("wp-menu-open wp-has-current-submenu wp-has-submenu").removeClass("wp-not-current-submenu").find("li a[href='edit.php?post_type=tribe_venue']").parent().addClass("current"),a("body").hasClass("post-type-tribe_organizer")&&a("#menu-posts-tribe_events, #menu-posts-tribe_events a.wp-has-submenu").addClass("wp-menu-open wp-has-current-submenu wp-has-submenu").removeClass("wp-not-current-submenu").find("li a[href='edit.php?post_type=tribe_organizer']").parent().addClass("current");var U=a("#tribe-field-tribeEnableViews");if(U.length){var V=a('.tribe-field-dropdown_select2 select[name="viewOption"]'),W=U.find("input:checkbox"),X=a("#tribe-field-tribeEnableViews .tribe-field-wrap p.description"),Y={};g(),U.on("change","input:checkbox",function(){var b=a(this);a('[name="tribeEnableViews[]"]:checked').length<1?(b.attr("checked",!0),X.css("color","red")):X.removeAttr("style"),h()})}}),jQuery(document).ajaxSuccess(function(a,b,c){"undefined"!=typeof c&&"undefined"!=typeof c.data&&-1!=c.data.search("action=save-widget")&&jQuery("#widgets-right .chosen").chosen()});