var tribe_events_bar_action;
(function(t,n,b,g,h,u,c,k,m){m&&(b().bootstrapDatepicker||debug.warn("TEC Debug: vendor bootstrapDatepicker was not loaded before its dependant file tribe-events-bar.js"),b().placeholder||debug.warn("TEC Debug: vendor placeholder was not loaded before its dependant file tribe-events-bar.js"),b().select2||debug.warn("TEC Debug: vendor select2 was not loaded before its dependant file tribe-events-bar.js"));b(n).ready(function(){function p(a){if(!a.parents(".tribe-bar-disabled").length){var b=a.width();
800<b?a.removeClass("tribe-bar-mini tribe-bar-collapse").addClass("tribe-bar-full"):a.removeClass("tribe-bar-full").addClass("tribe-bar-mini");670>b?a.removeClass("tribe-bar-mini").addClass("tribe-bar-collapse"):a.removeClass("tribe-bar-collapse")}}function q(){tribe_events_bar_action="change_view";if("month"===c.view&&d.length){var a=d.val();7===a.length&&d.val(a+u.get_day())}c.url_params={};b(h).trigger("tribe_ev_preCollectBarParams");b("#tribe-bar-form input").each(function(){var a=b(this);a.val().length&&
!a.hasClass("tribe-no-param")&&(a.is(":checkbox")?a.is(":checked")&&(c.url_params[a.attr("name")]=a.val()):c.url_params[a.attr("name")]=a.val())});c.url_params=b.param(c.url_params);b(h).trigger("tribe_ev_postCollectBarParams");c.url_params.length&&(c.cur_url+=k.starting_delim()+c.url_params);t.location.href=c.cur_url}var e=b("#tribe-bar-form"),d=b("#tribe-bar-date"),f=b("select[name=tribe-bar-view]");p(e);e.resize(function(){p(e)});if(!b(".tribe-events-week-grid").length&&(!b(".events-gridview").length||
k.map_view())){m&&debug.info('TEC Debug: bootstrapDatepicker was just initialized in "tribe-events-bar.js" on:',d);var v=d.bootstrapDatepicker({format:"yyyy-mm-dd",showAnim:"fadeIn"}).on("changeDate",function(){v.hide()}).data("datepicker")}d.blur(function(){""===d.val()&&(b(".datepicker.dropdown-menu").is(":hidden")&&k.live_ajax()&&k.pushstate)&&(c.date=g.cur_date,g.cur_url=g.base_url,b(h).trigger("tribe_ev_runAjax"))});b(".tribe-bar-settings").length&&b("#tribe-events-bar").addClass("tribe-has-settings");
b("#tribe-events-bar .hasDatepicker").length&&b("#tribe-events-bar").addClass("tribe-has-datepicker");b('input[name*="tribe-bar-"]').placeholder();b('<ul class="tribe-bar-views-list" />').insertAfter(f);var r=b(".tribe-bar-views-list");f.find("option").each(function(a){var c=b(this);b("<li></li>",{"class":"tribe-bar-views-option","data-tribe-bar-order":a,"data-view":c.data("view")}).html(['   <a href="#" onclick="return false;">','   <span class="tribe-icon-'+b.trim(c.text().toLowerCase())+'">'+c.text()+
"</span>","</a>"].join("")).appendTo(".tribe-bar-views-list")});var w=f.find(":selected").data("view");r.find("li[data-view="+w+"]").prependTo(r).addClass("tribe-bar-active");e.on("click","#tribe-bar-views",function(a){a.stopPropagation();b(this).toggleClass("tribe-bar-views-open")});e.on("click",".tribe-bar-views-option",function(a){a=b(this);if(!a.is(".tribe-bar-active")){var c=b(".tribe-bar-active"),d=c.data("tribe-bar-order")-1;c.removeClass("tribe-bar-active").insertAfter("li[data-tribe-bar-order="+
d+"]");a.prependTo("ul.tribe-bar-views-list").addClass("tribe-bar-active");a=a.data("view");b("option:selected",f).removeAttr("selected");b("option[data-view="+a+"]").attr("selected",!0);f.change()}});e.on("click","#tribe-bar-collapse-toggle",function(){b(this).toggleClass("tribe-bar-filters-open");b(".tribe-bar-filters").slideToggle("fast")});b("body").on("click",function(){b("#tribe-bar-views").removeClass("tribe-bar-views-closed")});b('label[for="tribe-bar-date"], input[name="tribe-bar-date"]').wrapAll('<div id="tribe-bar-dates" />');
b("#tribe-bar-filters").before(b("#tribe-bar-dates"));f.change(function(){c.cur_url=b(this).val();c.view_target=b('select[name=tribe-bar-view] option[value="'+c.cur_url+'"]').data("view");tribe_events_bar_action="change_view";q()});b("a.tribe-bar-view").on("click",function(a){a.preventDefault();a=b(this);var c=a.data("view");q(a.attr("href"),c)});b(h).on("tribe_ev_serializeBar",function(){b("form#tribe-bar-form input, #tribeHideRecurrence").each(function(){var a=b(this);a.is("#tribe-bar-date")&&(a.val().length?
(c.params[a.attr("name")]=a.val(),c.url_params[a.attr("name")]=a.val()):c.date=g.cur_date);a.val().length&&(!a.hasClass("tribe-no-param")&&!a.is("#tribe-bar-date"))&&(a.is(":checkbox")?a.is(":checked")&&(c.params[a.attr("name")]=a.val(),"map"!==c.view&&(c.url_params[a.attr("name")]=a.val()),("month"===c.view||"day"===c.view||"week"===c.view||c.recurrence)&&c.pushcount++):(c.params[a.attr("name")]=a.val(),"map"!==c.view&&(c.url_params[a.attr("name")]=a.val()),("month"===c.view||"day"===c.view||"week"===
c.view)&&c.pushcount++))})});var l=b('#tribe-events-bar [class^="tribe-bar-button-"]'),s=l.next(".tribe-bar-drop-content");l.click(function(){var a=b(this);a.toggleClass("open");a.next(".tribe-bar-drop-content").toggle();return!1});b(n).click(function(){l.hasClass("open")&&(l.removeClass("open"),s.hide())});s.click(function(a){a.stopPropagation()});m&&debug.info("TEC Debug: tribe-events-bar.js successfully loaded")})})(window,document,jQuery,tribe_ev.data,tribe_ev.events,tribe_ev.fn,tribe_ev.state,
tribe_ev.tests,tribe_debug);
